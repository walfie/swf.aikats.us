<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Aikatsu!</title>
<style>
html, body, #container {
  margin: 0;
  overflow: hidden;
  width: 100%;
  height: 100%;
}

body {
  display: flex;
  align-items: center;
  justify-content: center;
}
</style>
</head>
<body>
<div id="container"></div>

<script>
// https://developer.mozilla.org/en-US/docs/Web/API/URLUtils/search
(function() {
window.params = {};
if (location.search.length <= 1) { return; }
for (var aItKey, nKeyId = 0, aCouples = location.search.substr(1).split("&"); nKeyId < aCouples.length; nKeyId++) {
  aItKey = aCouples[nKeyId].split('=');
  window.params[decodeURIComponent(aItKey[0])] = aItKey.length > 1 ? decodeURIComponent(aItKey[1]) : "";
}
}());


</script>

<script>
window.loadJS = function(url, cb) {
  var script = document.createElement('script');
  var ref = document.querySelector('script');
  script.async = true;
  script.src = url;

  ref.parentNode.insertBefore(script, ref);

  script.onload = cb;
};

window.loadJS('https://www.gstatic.com/swiffy/v7.2.0/runtime.js', function() {
  var stage;
  var params = window.params;

  var file = window.location.hash.substring(1) || params.file || params.f || 'ichigo_fly';
  var div = document.getElementById('container');
  div.style.width = !isNaN(params.w) && params.w + 'px' || '100%';
  div.style.height = !isNaN(params.h) && params.h + 'px' || '100%';

  var initStage = function(file) {
    window.loadJS('js/' + file + '.js', function() {
      if (stage) { stage.destroy(); }

      stage = new swiffy.Stage(div, swiffyobject);
      stage.start();
    });
  };

  initStage(file);
});
</script>
</body>
</html>

